<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>

    <!-- surfboards container -->
    <div id="main" class="container mt-4">
        <ul id="surfboards-list" class="row"></ul>
    </div>

    <!-- pop-up modal -->
    <div class="modal fade" id="updateModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Update</h1>
                    <button id="update-modal-close" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="updateForm">
                        <label>id:<input type="text" id="_id" name="_id" readonly ></label><br>
                        <label>company:<input type="text" id="company" name="company" required></label><br>
                        <label>model:<input type="text" id="model" name="model" required></label><br>
                        <label>price:<input type="text" id="price" name="price" required></label><br>
                        <label>image:<input type="text" id="image" name="image" required></label><br>
                        <label>type:<input type="text" id="type" name="type" required></label><br>
                        <label>tail:<input type="text" id="tail" name="tail" required></label><br>
                    </form>
                </div>
                <div class="modal-footer">
                    <button id="modalUpdateButton" type="button" class="btn btn-primary">Update</button>
                </div>
            </div>
        </div>
    </div>

    <!-- delete pop-up -->
    <div class="modal fade" id="deleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Delete</h1>
                    <button id="delete-modal-close" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this surfboard?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" data-bs-dismiss="modal" class="btn btn-danger">No</button>
                    <button id="modalDeleteButton" type="button" class="btn btn-primary">Delete</button>
                </div>
            </div>
        </div>
    </div>


<!--    <form id="create">-->
<!--        <h1>Create  ( Admin )</h1>-->
<!--        <label><input type="text" name="company" required>company</label><br>-->
<!--        <label><input type="text" name="model" required>model</label><br>-->
<!--        <label><input type="text" name="price" required>price</label><br>-->
<!--        <label><input type="text" name="image" required>image</label><br>-->
<!--        <label><input type="text" name="type" required>type</label><br>-->
<!--        <label><input type="text" name="tail" required>tail</label><br>-->
<!--        <button type="submit">create</button>-->
<!--    </form>-->
<!--    <br>-->

<!--    <form id="complete-order">-->
<!--        <h1>Cart</h1>-->
<!--        <ul id="cart-list"></ul>-->
<!--        <h4 id="total-price">Total price: 0$</h4>-->
<!--        <button type="submit">Complete order</button>-->
<!--        <br>-->
<!--    </form>-->
<!--    <br>-->

<!--    <h1>Order complete</h1>-->
<!--    <ul id="last-order"></ul>-->
<!--    <br>-->

<!--    <form id="history">-->
<!--        <h1>My orders history</h1>-->
<!--        <button type="submit">Show my orders history</button>-->
<!--        <ul id="order-history"></ul>-->
<!--    </form>-->
<!--    <br>-->

<!--    <form id="allHistory">-->
<!--        <h1>All orders history ( Admin )</h1>-->
<!--        <button type="submit">Show all orders history</button>-->
<!--        <ul id="all-orders-history"></ul>-->
<!--    </form>-->
<!--    <br>-->

<!--    <div id="daily-income">-->
<!--        <h1>Daily income</h1>-->
<!--        <svg id="chart"></svg> &lt;!&ndash; Create an SVG container to hold the chart &ndash;&gt;-->
<!--    </div>-->

<!--    <div id="surfboards-daily-sales">-->
<!--        <h1>Daily surfboards sales</h1>-->
<!--        <h4>Blue: disco</h4>-->
<!--        <h4>Orange: 77</h4>-->
<!--        <h4>Green: modern 2</h4>-->
<!--        <svg id="surfboards-chart"></svg> &lt;!&ndash; Create an SVG container to hold the chart &ndash;&gt;-->
<!--    </div>-->


    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
    <script src="js/admin.js"></script>
<!--    <script>-->

<!--        $(document).ready(function() {-->

<!--            // daily income chart-->
<!--            $.ajax({-->
<!--                url: '/order/dailyIncome',-->
<!--                method: 'get',-->
<!--                success: (response) => {-->

<!--                    // Receive the data from the server-->
<!--                    const { dailyIncome } = response;-->

<!--                    // Set up the dimensions and margins of the chart-->
<!--                    const margin = { top: 20, right: 20, bottom: 30, left: 40 };-->
<!--                    const width = 100;-->
<!--                    const height = 500;-->

<!--                    // Create an SVG element with the specified width and height-->
<!--                    const svg = d3.select("#chart")-->
<!--                        .attr("width", width + margin.left + margin.right)-->
<!--                        .attr("height", height + margin.top + margin.bottom)-->
<!--                        .append("g")-->
<!--                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");-->

<!--                    // Define the x and y scales-->
<!--                    const xScale = d3.scaleBand()-->
<!--                        .range([0, width])-->
<!--                        .padding(0.1)-->
<!--                        .domain(dailyIncome.map(d => d._id.day));-->

<!--                    const yScale = d3.scaleLinear()-->
<!--                        .range([height, 0])-->
<!--                        .domain([0, d3.max(dailyIncome, d => d.totalIncome)]);-->

<!--                    // Define the line generator-->
<!--                    const line = d3.line()-->
<!--                        .x(d => xScale(d._id.day) + xScale.bandwidth() / 2)-->
<!--                        .y(d => yScale(d.totalIncome))-->
<!--                        .curve(d3.curveMonotoneX); // Add a curve to smooth the line-->

<!--                    // Create the line path-->
<!--                    svg.append("path")-->
<!--                        .datum(dailyIncome)-->
<!--                        .attr("class", "line")-->
<!--                        .attr("d", line)-->
<!--                        .attr("fill", "none")-->
<!--                        .attr("stroke", "black")-->
<!--                        .attr("stroke-width", 2);-->

<!--                    // Create the y-axis-->
<!--                    svg.append("g")-->
<!--                        .attr("class", "axis")-->
<!--                        .call(d3.axisLeft(yScale));-->

<!--                    // Create the x-axis-->
<!--                    svg.append("g")-->
<!--                        .attr("class", "axis")-->
<!--                        .attr("transform", "translate(0," + height + ")")-->
<!--                        .call(d3.axisBottom(xScale));-->
<!--                }-->
<!--            });-->


<!--            // surfboards sales-->
<!--            $.ajax({-->
<!--                url: '/order/dailySurfboardsSales',-->
<!--                method: 'get',-->
<!--                success: (response) => {-->
<!--                    const { dailySurfboardsSales } = response;-->

<!--                    // Set up the dimensions and margins of the chart-->
<!--                    const margin = { top: 20, right: 20, bottom: 30, left: 40 };-->
<!--                    const width = 500; // Adjust the width to accommodate three bars per day-->
<!--                    const height = 500;-->

<!--                    // Create an SVG element with the specified width and height-->
<!--                    const svg = d3.select("#surfboards-chart")-->
<!--                        .attr("width", width + margin.left + margin.right)-->
<!--                        .attr("height", height + margin.top + margin.bottom)-->
<!--                        .append("g")-->
<!--                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");-->

<!--                    // Extract unique surfboard names-->
<!--                    const surfboards = Array.from(new Set(dailySurfboardsSales.map(d => d.surfboard)));-->

<!--                    // Define the x and y scales-->
<!--                    const xScale = d3.scaleBand()-->
<!--                        .range([0, width])-->
<!--                        .padding(0.1)-->
<!--                        .domain(dailySurfboardsSales.map(d => d.day));-->

<!--                    const yScale = d3.scaleLinear()-->
<!--                        .range([height, 0])-->
<!--                        .domain([0, d3.max(dailySurfboardsSales, d => d.totalQuantity)]);-->

<!--                    svg.selectAll(".bar")-->
<!--                        .data(dailySurfboardsSales)-->
<!--                        .enter()-->
<!--                        .append("g")-->
<!--                        .attr("class", "bar")-->
<!--                        .attr("transform", d => `translate(${xScale(d.day)}, 0)`)-->
<!--                        .selectAll("rect")-->
<!--                        .data(d => {-->
<!--                            const surfboardIndex = surfboards.indexOf(d.surfboard);-->
<!--                            return Array.from({ length: surfboards.length }, (_, i) => ({-->
<!--                                surfboard: d.surfboard,-->
<!--                                index: i,-->
<!--                                quantity: i === surfboardIndex ? d.totalQuantity : 0-->
<!--                            }));-->
<!--                        })-->
<!--                        .enter()-->
<!--                        .append("rect")-->
<!--                        .attr("x", (d) => (xScale.bandwidth() / surfboards.length) * d.index)-->
<!--                        .attr("y", d => yScale(d.quantity))-->
<!--                        .attr("width", xScale.bandwidth() / surfboards.length)-->
<!--                        .attr("height", d => height - yScale(d.quantity))-->
<!--                        .attr("fill", (d, i) => d3.schemeCategory10[i]);-->


<!--                    // Add the year and month on top of the graph-->
<!--                    svg.append("text")-->
<!--                        .attr("x", width / 2)-->
<!--                        .attr("y", -margin.top / 2)-->
<!--                        .attr("text-anchor", "middle")-->
<!--                        .style("font-size", "14px")-->
<!--                        .text(`Year: ${dailySurfboardsSales[0].year}, Month: ${dailySurfboardsSales[0].month}`);-->

<!--                    // Create the y-axis-->
<!--                    svg.append("g")-->
<!--                        .attr("class", "axis")-->
<!--                        .call(d3.axisLeft(yScale));-->

<!--                    // Create the x-axis-->
<!--                    svg.append("g")-->
<!--                        .attr("class", "axis")-->
<!--                        .attr("transform", "translate(0," + height + ")")-->
<!--                        .call(d3.axisBottom(xScale));-->
<!--                }-->
<!--            });-->


<!--            // get cart items-->
<!--            function getItems() {-->

<!--                $.ajax({-->

<!--                    url: "/cart/getItems",-->
<!--                    method: 'get',-->
<!--                    success: (response) => {-->

<!--                        const { cart } = response;-->

<!--                        $('#cart-list').empty();  // Clear the existing list-->
<!--                        cart.products.forEach((product) => {-->

<!--                            const listItem = $('<li>company: ' + product.productId.company + ', model: ' + product.productId.model +-->
<!--                                               ', amount:' + product.quantity + ', price: ' +-->
<!--                                                Number(product.quantity) * Number(product.productId.price) + '$ </li>');-->

<!--                            // add to cart-->
<!--                            const addButton = $('<button type="button">Remove from cart</button>');-->
<!--                            addButton.click(function() {-->
<!--                                removeFromCart(product.productId);  // Call the addToCart function with the surfboard ID-->
<!--                            });-->
<!--                            listItem.append(addButton);-->

<!--                            // plus 1 to item quantity-->
<!--                            const plusButton = $('<button type="button">+</button>');-->
<!--                            plusButton.click(function() {-->
<!--                                updateItem(product.productId, product.quantity + 1, product.productId.price);-->
<!--                            });-->
<!--                            listItem.append(plusButton);-->

<!--                            // minus 1 to item quantity-->
<!--                            const minusButton = $('<button type="button">-</button>');-->
<!--                            minusButton.click(function() {-->
<!--                                updateItem(product.productId, product.quantity - 1, product.productId.price);-->
<!--                            });-->
<!--                            listItem.append(minusButton);-->

<!--                            // append all the above-->
<!--                            $('#cart-list').append(listItem);-->
<!--                        });-->

<!--                        $('#total-price').text("Total price: " + cart.totalPrice + "$");-->
<!--                    },-->
<!--                    error: (error) => {-->
<!--                        console.log('Error:', error);-->
<!--                    }-->
<!--                });-->
<!--            }-->


<!--            // create new surfboard-->
<!--            $('#create').submit(function(e){-->

<!--                e.preventDefault();-->
<!--                $.ajax({-->
<!--                    type: "POST",-->
<!--                    url:"/store/createSurfboard",-->
<!--                    data: $('#create').serialize(),-->
<!--                    success: function(response) {-->

<!--                        const { newSurfboard } = response;-->

<!--                        const listItem = $('<li>' + newSurfboard.company + ', ' + newSurfboard.model + ', ' + newSurfboard.price + '$, ' + newSurfboard._id + '</li>');-->
<!--                        const addButton = $('<button type="button">Add to Cart</button>');-->
<!--                        addButton.click(function() {-->
<!--                            addToCart(newSurfboard._id);  // Call the addToCart function with the surfboard ID-->
<!--                        });-->
<!--                        listItem.append(addButton);-->
<!--                        $('#surfboards-list').append(listItem);-->
<!--                        $('#create').trigger('reset');-->
<!--                    },-->
<!--                    error: (xhr, error) => {-->

<!--                        if (xhr.status) {-->

<!--                            const jsonResponse = JSON.parse(xhr.responseText);-->
<!--                            const { redirectUrl, message } = jsonResponse;-->
<!--                            alert(message);-->
<!--                            window.location.href = redirectUrl;-->
<!--                        }-->
<!--                        else-->
<!--                            console.log('Error:', error);-->
<!--                    }-->
<!--                });-->
<!--            });-->


<!--            function removeFromCart(productId) {-->

<!--                $.ajax({-->

<!--                    type: "put",-->
<!--                    url: "/cart/remove",-->
<!--                    data: { productId },-->
<!--                    success: function(response) {-->

<!--                        getItems();-->
<!--                        const { message } = response;-->
<!--                        alert(message);-->
<!--                    },-->
<!--                    error: function(xhr, status, error) {-->
<!--                        console.log("Error:", error);-->
<!--                    }-->
<!--                });-->
<!--            }-->
<!--            function updateItem(productId, quantity, surfboardPrice) {-->

<!--                $.ajax({-->

<!--                    type: "put",-->
<!--                    url: "/cart/update",-->
<!--                    data: { productId, quantity, surfboardPrice },-->
<!--                    success: function(response) {-->

<!--                        getItems()-->
<!--                        const { message } = response;-->
<!--                        alert(message);-->
<!--                    },-->
<!--                    error: function(xhr, status, error) {-->
<!--                        console.log("Error:", error);-->
<!--                    }-->
<!--                });-->
<!--            }-->


<!--            // get cart items-->
<!--            $.ajax({-->

<!--                url: "/cart/getItems",-->
<!--                method: 'get',-->
<!--                success: () => {-->

<!--                    getItems();-->
<!--                },-->
<!--                error: (error) => {-->
<!--                    console.log('Error:', error);-->
<!--                }-->
<!--            });-->


<!--            $('#complete-order').submit(function(e) {-->

<!--                e.preventDefault();-->
<!--                $.ajax({-->
<!--                    type: "post",-->
<!--                    url: '/order/completeOrder',-->
<!--                    success: function (response) {-->

<!--                        getItems();-->

<!--                        const { order } = response;-->
<!--                        $('#last-order').empty();  // Clear the existing list-->
<!--                        order.products.forEach((product) => {-->

<!--                            const listItem = $('<li>' + product.productId.company + ', ' + product.productId.model +-->
<!--                                               ', ' + product.productId.price + '$, amount:' + product.quantity + '</li>');-->
<!--                            $('#last-order').append(listItem);-->
<!--                        });-->
<!--                    },-->
<!--                    error: (error) => {-->

<!--                        alert('Error:' + error);-->
<!--                    }-->
<!--                });-->
<!--            });-->

<!--            // order history of a user-->
<!--            $('#history').submit(function(e) {-->

<!--                e.preventDefault();-->
<!--                $.ajax({-->
<!--                    type: "post",-->
<!--                    url: '/order/history',-->
<!--                    success: function (response) {-->

<!--                        const { orders } = response;-->
<!--                        $('#order-history').empty();  // Clear the existing list-->

<!--                        let i = 1;-->
<!--                        orders.forEach((order) => {-->

<!--                            $('#order-history').append('<h4>Order: ' + i + ' ' + 'Username: ' + order.username + '</h4>');-->

<!--                            order.products.forEach((product) => {-->

<!--                                const listItem = $('<li>' + product.productId.company + ', ' + product.productId.model +-->
<!--                                    ', ' + product.productId.price + '$, amount:' + product.quantity + '</li>');-->
<!--                                $('#order-history').append(listItem);-->
<!--                            });-->
<!--                            i++;-->
<!--                        });-->
<!--                    },-->
<!--                    error: (error) => {-->
<!--                        console.log('Error:', error);-->
<!--                    }-->
<!--                });-->
<!--            });-->
<!--            // all the history for an admin-->
<!--            $('#allHistory').submit(function(e) {-->

<!--                e.preventDefault();-->
<!--                $.ajax({-->
<!--                    type: "post",-->
<!--                    url: '/order/allHistory',-->
<!--                    success: function (response) {-->

<!--                        const { orders } = response;-->
<!--                        $('#all-orders-history').empty();  // Clear the existing list-->

<!--                        let i = 1;-->
<!--                        orders.forEach((order) => {-->

<!--                            $('#all-orders-history').append('<h4>Order: ' + i + ' ' + 'Username: ' + order.username + '</h4>');-->

<!--                            order.products.forEach((product) => {-->

<!--                                const listItem = $('<li>' + product.productId.company + ', ' + product.productId.model +-->
<!--                                    ', ' + product.productId.price + '$, amount:' + product.quantity + '</li>');-->
<!--                                $('#all-orders-history').append(listItem);-->
<!--                            });-->
<!--                            i++;-->
<!--                        });-->
<!--                    },-->
<!--                    error: (error) => {-->
<!--                        console.log('Error:', error);-->
<!--                    }-->
<!--                });-->
<!--            });-->

<!--    });-->
<!--    </script>-->
</body>
</html>