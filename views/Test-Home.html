<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login and Registration Forms</title>
</head>
<body>
    <h1>Login</h1>
    <form id="login">
        <label for="login-username">Username:</label>
        <input type="text" id="login-username" name="username" value="Yaniv" autocomplete="off" required><br>

        <label for="login-password">Password:</label>
        <input type="password" id="login-password" name="password" value="123" autocomplete="off" required><br>

        <button type="submit">Login</button>
    </form>
    <br>
    <h1>Registration</h1>
    <form id="register">
        <label for="register-username">Username:</label>
        <input type="text" id="register-username" name="username" autocomplete="off" required><br>

        <label for="register-password">Password:</label>
        <input type="password" id="register-password" name="password" autocomplete="off" required><br>

        <button type="submit">Register</button>
    </form>
    <br>
    <div>
        <h1>Logout</h1>
        <form id="logout">
            <button type="submit">Logout</button>
        </form>
    </div>
    <br>
    <h1>Surfboards</h1>
    <a href="/store" class="button">Show Surfboards</a>

    <br>
    <a href="/chat">Chat</a>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script>

        $(document).ready(() => {

            $('#register').submit((event) => {

                event.preventDefault(); // Prevent form submission
                $.ajax({

                    url: '/auth/register',
                    method: 'POST',
                    data: $('#register').serialize(),
                    success: () => {

                        window.location.href = '/';
                    },
                    error: (xhr) => {

                        const { message } = xhr.responseJSON;
                        alert('Status: ' + xhr.status + '\nMessage: ' + message);
                    }
                });
            });

            $('#login').submit((event) => {

                event.preventDefault(); // Prevent form submission
                $.ajax({

                    url: '/auth/login',
                    method: 'POST',
                    data: $('#login').serialize(),
                    success: () => {

                        window.location.href = '/';
                    },
                    error: (xhr) => {

                        const { message } = xhr.responseJSON;
                        alert('Status: ' + xhr.status + '\nMessage: ' + message);
                    }
                });
            });

            $('#logout').submit((event) => {

                event.preventDefault(); // Prevent form submission
                $.ajax({

                    url: '/auth/logout',
                    method: 'POST',
                    success: () => {

                        window.location.href = '/';
                    },
                    error: (xhr) => {

                        const { message } = xhr.responseJSON;
                        alert('Status: ' + xhr.status + '\nMessage: ' + message);
                    }
                });
            });
        });
    </script>

</body>
</html>
